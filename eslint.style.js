import nodePlugin from 'eslint-plugin-n'
import stylistic from '@stylistic/eslint-plugin'

const rules = {
  '@stylistic/indent': ['error', 2, { SwitchCase: 1 }],
  '@stylistic/quotes': ['error', 'single'],
  '@stylistic/keyword-spacing': ['error'],
  'prefer-const': ['error'],
  '@stylistic/space-before-function-paren': ['error', 'always'],
  eqeqeq: ['error', 'always'],
  '@stylistic/space-infix-ops': ['error', { int32Hint: false }],
  '@stylistic/comma-spacing': ['error', { before: false, after: true }],
  '@stylistic/brace-style': ['error', '1tbs', { allowSingleLine: true }],
  curly: ['error', 'multi-line'],
  'n/handle-callback-err': ['error'],
  '@stylistic/no-multiple-empty-lines': ['error', { max: 1, maxBOF: 0, maxEOF: 0 }],
  '@stylistic/operator-linebreak': ['error', 'after', { overrides: { '?': 'before', ':': 'before' } }],
  'one-var': ['error', 'never'],
  '@stylistic/block-spacing': ['error'],
  camelcase: ['error', { properties: 'never' }],
  '@stylistic/comma-dangle': ['error', 'never'],
  '@stylistic/comma-style': ['error', 'last'],
  '@stylistic/dot-location': ['error', 'property'],
  '@stylistic/eol-last': ['error', 'always'],
  '@stylistic/function-call-spacing': ['error', 'never'],
  '@stylistic/key-spacing': ['error', { beforeColon: false, afterColon: true, mode: 'strict' }],
  'new-cap': ['error', { newIsCap: true, capIsNew: false }],
  '@stylistic/new-parens': ['error', 'always'],
  'accessor-pairs': ['error', { setWithoutGet: true, getWithoutSet: false }],
  'no-array-constructor': ['error'],
  'no-caller': ['error'],
  'no-duplicate-imports': ['error'],
  'no-eval': ['error'],
  'no-extend-native': ['error'],
  'no-extra-bind': ['error'],
  '@stylistic/no-extra-parens': ['error'],
  '@stylistic/no-floating-decimal': ['error'],
  'no-implied-eval': ['error'],
  'no-inner-declarations': ['error'],
  'no-iterator': ['error'],
  'no-label-var': ['error'],
  'no-labels': ['error'],
  'no-lone-blocks': ['error'],
  '@stylistic/no-mixed-spaces-and-tabs': ['error'],
  '@stylistic/no-multi-spaces': ['error'],
  'no-multi-str': ['error'],
  'no-new': ['error'],
  'no-new-func': ['error'],
  'no-new-object': ['error'],
  'n/no-new-require': ['error'],
  'no-new-symbol': ['error'],
  'no-new-wrappers': ['error'],
  'no-octal-escape': ['error'],
  'n/no-path-concat': ['error'],
  'no-proto': ['error'],
  'no-return-assign': ['error'],
  'no-self-compare': ['error'],
  'no-sequences': ['error'],
  '@stylistic/no-tabs': ['error'],
  'no-template-curly-in-string': ['error'],
  'no-throw-literal': ['error'],
  '@stylistic/no-trailing-spaces': ['error'],
  'no-undef-init': ['error'],
  'no-unmodified-loop-condition': ['error'],
  'no-unneeded-ternary': ['error', { defaultAssignment: false }],
  'no-useless-call': ['error'],
  'no-useless-computed-key': ['error'],
  'no-useless-constructor': ['error'],
  'no-useless-rename': ['error'],
  'no-whitespace-before-property': ['error'],
  '@stylistic/object-property-newline': ['error', { allowAllPropertiesOnSameLine: true }],
  '@stylistic/padded-blocks': ['error', 'never'],
  '@stylistic/rest-spread-spacing': ['error'],
  '@stylistic/semi-spacing': ['error', { before: false, after: true }],
  '@stylistic/space-before-blocks': ['error'],
  '@stylistic/space-in-parens': ['error'],
  '@stylistic/space-unary-ops': ['error'],
  '@stylistic/spaced-comment': ['error'],
  '@stylistic/template-curly-spacing': ['error'],
  '@stylistic/wrap-iife': ['error'],
  '@stylistic/yield-star-spacing': ['error', 'both'],
  yoda: ['error'],
  '@stylistic/semi': ['error', 'never'],
  // Extra settings
  // 'n/no-unpublished-import': ['error', {
  //   allowModules: [
  //     'globals',
  //     '@eslint/js',
  //     'eslint-plugin-n',
  //     '@stylistic/eslint-plugin-js',
  //     'metadata.json'
  //   ]
  // }],
  'n/no-unpublished-import': 'off',
  'no-var': ['warn'],
  // 'n/no-unsupported-features/es-syntax': ['error', { ignores: ['promise-withresolvers'] }],
  'n/no-unsupported-features/es-syntax': ['error'],
  '@stylistic/object-curly-spacing': ['error', 'always'],
  '@stylistic/quote-props': ['error', 'as-needed'],
  '@stylistic/object-curly-newline': ['error', { consistent: true }],
  '@stylistic/array-bracket-spacing': ['error']
}

export default {
  settings: { node: { version: '>=22.15.0' } },
  plugins: {
    n: nodePlugin,
   '@stylistic': stylistic
  },
  extends: [nodePlugin.configs['flat/recommended-module']],
  rules: rules
}
